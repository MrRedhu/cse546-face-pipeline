<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: p1_part2 Pages: 1 -->
<svg width="1025pt" height="358pt"
 viewBox="7.20 7.20 1017.80 350.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(18 340)">
<title>p1_part2</title>
<polygon fill="white" stroke="transparent" points="-10.8,10.8 -10.8,-332.8 999.8,-332.8 999.8,10.8 -10.8,10.8"/>
<text text-anchor="middle" x="494.5" y="-300.4" font-family="Inter" font-size="22.00">Project 1 Part 2 â€” Multi&#45;Tier EC2 Pipeline + SQS + Custom Autoscaling (No Lambda)</text>
<g id="clust1" class="cluster">
<title>cluster_client</title>
<path fill="white" stroke="#d1d5db" d="M673,-217.5C673,-217.5 749,-217.5 749,-217.5 755,-217.5 761,-223.5 761,-229.5 761,-229.5 761,-264.5 761,-264.5 761,-270.5 755,-276.5 749,-276.5 749,-276.5 673,-276.5 673,-276.5 667,-276.5 661,-270.5 661,-264.5 661,-264.5 661,-229.5 661,-229.5 661,-223.5 667,-217.5 673,-217.5"/>
<text text-anchor="middle" x="711" y="-261.3" font-family="Inter" font-size="14.00">Client</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_web</title>
<path fill="white" stroke="#d1d5db" d="M697,-115.5C697,-115.5 793,-115.5 793,-115.5 799,-115.5 805,-121.5 805,-127.5 805,-127.5 805,-162.5 805,-162.5 805,-168.5 799,-174.5 793,-174.5 793,-174.5 697,-174.5 697,-174.5 691,-174.5 685,-168.5 685,-162.5 685,-162.5 685,-127.5 685,-127.5 685,-121.5 691,-115.5 697,-115.5"/>
<text text-anchor="middle" x="745" y="-159.3" font-family="Inter" font-size="14.00">Web Tier (EC2)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_control</title>
<path fill="white" stroke="#d1d5db" d="M155,-212C155,-212 331,-212 331,-212 337,-212 343,-218 343,-224 343,-224 343,-270 343,-270 343,-276 337,-282 331,-282 331,-282 155,-282 155,-282 149,-282 143,-276 143,-270 143,-270 143,-224 143,-224 143,-218 149,-212 155,-212"/>
<text text-anchor="middle" x="243" y="-266.8" font-family="Inter" font-size="14.00">Control Plane</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_queues</title>
<path fill="white" stroke="#d1d5db" d="M435,-8C435,-8 727,-8 727,-8 733,-8 739,-14 739,-20 739,-20 739,-66 739,-66 739,-72 733,-78 727,-78 727,-78 435,-78 435,-78 429,-78 423,-72 423,-66 423,-66 423,-20 423,-20 423,-14 429,-8 435,-8"/>
<text text-anchor="middle" x="581" y="-62.8" font-family="Inter" font-size="14.00">Messaging (SQS)</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_app</title>
<path fill="white" stroke="#d1d5db" d="M166,-110C166,-110 321,-110 321,-110 327,-110 333,-116 333,-122 333,-122 333,-168 333,-168 333,-174 327,-180 321,-180 321,-180 166,-180 166,-180 160,-180 154,-174 154,-168 154,-168 154,-122 154,-122 154,-116 160,-110 166,-110"/>
<text text-anchor="middle" x="243.5" y="-164.8" font-family="Inter" font-size="14.00">App Tier (EC2 Workers)</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_storage</title>
<path fill="white" stroke="#d1d5db" d="M20,-13.5C20,-13.5 303,-13.5 303,-13.5 309,-13.5 315,-19.5 315,-25.5 315,-25.5 315,-60.5 315,-60.5 315,-66.5 309,-72.5 303,-72.5 303,-72.5 20,-72.5 20,-72.5 14,-72.5 8,-66.5 8,-60.5 8,-60.5 8,-25.5 8,-25.5 8,-19.5 14,-13.5 20,-13.5"/>
<text text-anchor="middle" x="161.5" y="-57.3" font-family="Inter" font-size="14.00">Storage (S3)</text>
</g>
<!-- client -->
<g id="node1" class="node">
<title>client</title>
<path fill="#eef2ff" stroke="#111827" stroke-width="1.6" d="M749,-253.5C749,-253.5 673,-253.5 673,-253.5 667,-253.5 661,-247.5 661,-241.5 661,-241.5 661,-229.5 661,-229.5 661,-223.5 667,-217.5 673,-217.5 673,-217.5 749,-217.5 749,-217.5 755,-217.5 761,-223.5 761,-229.5 761,-229.5 761,-241.5 761,-241.5 761,-247.5 755,-253.5 749,-253.5"/>
<text text-anchor="middle" x="711" y="-238.9" font-family="Inter" font-size="12.00">User / Client</text>
<text text-anchor="middle" x="711" y="-225.9" font-family="Inter" font-size="12.00">Upload image</text>
</g>
<!-- web -->
<g id="node2" class="node">
<title>web</title>
<path fill="#fffbeb" stroke="#111827" stroke-width="1.6" d="M768.5,-151.5C768.5,-151.5 721.5,-151.5 721.5,-151.5 715.5,-151.5 709.5,-145.5 709.5,-139.5 709.5,-139.5 709.5,-127.5 709.5,-127.5 709.5,-121.5 715.5,-115.5 721.5,-115.5 721.5,-115.5 768.5,-115.5 768.5,-115.5 774.5,-115.5 780.5,-121.5 780.5,-127.5 780.5,-127.5 780.5,-139.5 780.5,-139.5 780.5,-145.5 774.5,-151.5 768.5,-151.5"/>
<text text-anchor="middle" x="745" y="-136.9" font-family="Inter" font-size="12.00">Web Tier</text>
<text text-anchor="middle" x="745" y="-123.9" font-family="Inter" font-size="12.00">server.py</text>
</g>
<!-- client&#45;&gt;web -->
<g id="edge1" class="edge">
<title>client&#45;&gt;web</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M748.77,-217.38C755.68,-212.47 761.98,-206.39 766,-199 772.68,-186.73 768.66,-171.98 762.42,-159.69"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="765.03,-157.9 757.86,-151.63 759.55,-161.01 765.03,-157.9"/>
<text text-anchor="middle" x="800" y="-191" font-family="Inter" font-size="10.00">HTTP upload</text>
</g>
<!-- web&#45;&gt;client -->
<g id="edge9" class="edge">
<title>web&#45;&gt;client</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M709.46,-140.88C683.08,-147.68 648.89,-161.31 632,-188 622.97,-202.27 635,-212.7 652.19,-220.02"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="651.44,-223.11 660.97,-223.37 653.68,-217.22 651.44,-223.11"/>
<text text-anchor="middle" x="697" y="-191" font-family="Inter" font-size="10.00">return: filename:prediction</text>
</g>
<!-- req -->
<g id="node4" class="node">
<title>req</title>
<path fill="#fef3c7" stroke="#111827" stroke-width="1.6" d="M557,-55C557,-55 435,-55 435,-55 429,-55 423,-49 423,-43 423,-43 423,-20 423,-20 423,-14 429,-8 435,-8 435,-8 557,-8 557,-8 563,-8 569,-14 569,-20 569,-20 569,-43 569,-43 569,-49 563,-55 557,-55"/>
<text text-anchor="middle" x="496" y="-41.4" font-family="Inter" font-size="12.00">Request Queue</text>
<text text-anchor="middle" x="496" y="-28.4" font-family="Inter" font-size="12.00">&lt;ASU_ID&gt;&#45;req&#45;queue</text>
<text text-anchor="middle" x="496" y="-15.4" font-family="Inter" font-size="12.00">(metadata only)</text>
</g>
<!-- web&#45;&gt;req -->
<g id="edge3" class="edge">
<title>web&#45;&gt;req</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M741.54,-115.43C738.49,-105.11 732.93,-92.68 723,-86 709.61,-77 593.5,-82.47 578,-78 563.88,-73.93 549.53,-67.07 536.86,-59.9"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="538.16,-57.01 528.8,-55.17 534.97,-62.45 538.16,-57.01"/>
<text text-anchor="middle" x="820.5" y="-89" font-family="Inter" font-size="10.00">SendMessage(filename, request_id)</text>
</g>
<!-- resp -->
<g id="node5" class="node">
<title>resp</title>
<path fill="#fef3c7" stroke="#111827" stroke-width="1.6" d="M727,-55C727,-55 599,-55 599,-55 593,-55 587,-49 587,-43 587,-43 587,-20 587,-20 587,-14 593,-8 599,-8 599,-8 727,-8 727,-8 733,-8 739,-14 739,-20 739,-20 739,-43 739,-43 739,-49 733,-55 727,-55"/>
<text text-anchor="middle" x="663" y="-41.4" font-family="Inter" font-size="12.00">Response Queue</text>
<text text-anchor="middle" x="663" y="-28.4" font-family="Inter" font-size="12.00">&lt;ASU_ID&gt;&#45;resp&#45;queue</text>
<text text-anchor="middle" x="663" y="-15.4" font-family="Inter" font-size="12.00">(request_id, result)</text>
</g>
<!-- web&#45;&gt;resp -->
<g id="edge8" class="edge">
<title>web&#45;&gt;resp</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M780.73,-130.49C826.95,-127.05 903.63,-118.23 921,-97 924.1,-93.22 924.09,-89.79 921,-86 899.38,-59.44 814.82,-45.65 748.32,-38.78"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="748.33,-35.61 739.06,-37.85 747.71,-41.88 748.33,-35.61"/>
<text text-anchor="middle" x="956" y="-89" font-family="Inter" font-size="10.00">Poll for result</text>
</g>
<!-- s3in -->
<g id="node7" class="node">
<title>s3in</title>
<path fill="#fee2e2" stroke="#111827" stroke-width="1.6" d="M303,-49.5C303,-49.5 187,-49.5 187,-49.5 181,-49.5 175,-43.5 175,-37.5 175,-37.5 175,-25.5 175,-25.5 175,-19.5 181,-13.5 187,-13.5 187,-13.5 303,-13.5 303,-13.5 309,-13.5 315,-19.5 315,-25.5 315,-25.5 315,-37.5 315,-37.5 315,-43.5 309,-49.5 303,-49.5"/>
<text text-anchor="middle" x="245" y="-34.9" font-family="Inter" font-size="12.00">S3 Input Bucket</text>
<text text-anchor="middle" x="245" y="-21.9" font-family="Inter" font-size="12.00">&lt;ASU_ID&gt;&#45;in&#45;bucket</text>
</g>
<!-- web&#45;&gt;s3in -->
<g id="edge2" class="edge">
<title>web&#45;&gt;s3in</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M709.4,-133.2C649.81,-133.34 526.79,-129.22 429,-97 419.73,-93.95 418.91,-89.97 410,-86 380.34,-72.78 346.38,-61.21 317.02,-52.23"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="317.59,-49.12 308.06,-49.54 315.77,-55.15 317.59,-49.12"/>
<text text-anchor="middle" x="472" y="-89" font-family="Inter" font-size="10.00">PutObject(image)</text>
</g>
<!-- ctrl -->
<g id="node3" class="node">
<title>ctrl</title>
<path fill="#ecfdf5" stroke="#111827" stroke-width="1.6" d="M331,-259C331,-259 155,-259 155,-259 149,-259 143,-253 143,-247 143,-247 143,-224 143,-224 143,-218 149,-212 155,-212 155,-212 331,-212 331,-212 337,-212 343,-218 343,-224 343,-224 343,-247 343,-247 343,-253 337,-259 331,-259"/>
<text text-anchor="middle" x="243" y="-245.4" font-family="Inter" font-size="12.00">Autoscaling Controller</text>
<text text-anchor="middle" x="243" y="-232.4" font-family="Inter" font-size="12.00">controller.py</text>
<text text-anchor="middle" x="243" y="-219.4" font-family="Inter" font-size="12.00">(scales app&#45;tier EC2 instances)</text>
</g>
<!-- app -->
<g id="node6" class="node">
<title>app</title>
<path fill="#fff7ed" stroke="#111827" stroke-width="1.6" d="M295,-157C295,-157 191,-157 191,-157 185,-157 179,-151 179,-145 179,-145 179,-122 179,-122 179,-116 185,-110 191,-110 191,-110 295,-110 295,-110 301,-110 307,-116 307,-122 307,-122 307,-145 307,-145 307,-151 301,-157 295,-157"/>
<text text-anchor="middle" x="243" y="-143.4" font-family="Inter" font-size="12.00">App Tier Worker(s)</text>
<text text-anchor="middle" x="243" y="-130.4" font-family="Inter" font-size="12.00">backend.py</text>
<text text-anchor="middle" x="243" y="-117.4" font-family="Inter" font-size="12.00">DL inference</text>
</g>
<!-- ctrl&#45;&gt;app -->
<g id="edge10" class="edge">
<title>ctrl&#45;&gt;app</title>
<path fill="none" stroke="#374151" stroke-width="1.4" stroke-dasharray="5,2" d="M243,-211.81C243,-198.38 243,-181.17 243,-166.39"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="246.15,-166.1 243,-157.1 239.85,-166.1 246.15,-166.1"/>
<text text-anchor="middle" x="302" y="-191" font-family="Inter" font-size="10.00">start/stop EC2 instances</text>
</g>
<!-- req&#45;&gt;app -->
<g id="edge4" class="edge">
<title>req&#45;&gt;app</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M422.75,-49.14C376.5,-60.29 321.56,-74.9 300,-86 290.6,-90.84 281.32,-97.41 273.07,-104.08"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="270.97,-101.73 266.1,-109.94 275.02,-106.56 270.97,-101.73"/>
<text text-anchor="middle" x="355" y="-89" font-family="Inter" font-size="10.00">Poll / ReceiveMessage</text>
</g>
<!-- app&#45;&gt;resp -->
<g id="edge7" class="edge">
<title>app&#45;&gt;resp</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M307.08,-131.39C364.07,-128.75 448.99,-120.7 519,-97 528.24,-93.87 528.87,-89.45 538,-86 554.96,-79.59 560.94,-84.12 578,-78 591.57,-73.13 605.63,-66.39 618.32,-59.58"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="620.06,-62.22 626.43,-55.12 617.03,-56.7 620.06,-62.22"/>
<text text-anchor="middle" x="628.5" y="-89" font-family="Inter" font-size="10.00">SendMessage(request_id, prediction)</text>
</g>
<!-- app&#45;&gt;s3in -->
<g id="edge5" class="edge">
<title>app&#45;&gt;s3in</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M196.27,-109.94C189.02,-103.25 185.06,-95.21 189,-86 193.97,-74.38 202.85,-64.07 212.09,-55.69"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="214.35,-57.89 219.16,-49.66 210.27,-53.1 214.35,-57.89"/>
<text text-anchor="middle" x="233" y="-89" font-family="Inter" font-size="10.00">GetObject(image)</text>
</g>
<!-- s3out -->
<g id="node8" class="node">
<title>s3out</title>
<path fill="#fee2e2" stroke="#111827" stroke-width="1.6" d="M144.5,-49.5C144.5,-49.5 19.5,-49.5 19.5,-49.5 13.5,-49.5 7.5,-43.5 7.5,-37.5 7.5,-37.5 7.5,-25.5 7.5,-25.5 7.5,-19.5 13.5,-13.5 19.5,-13.5 19.5,-13.5 144.5,-13.5 144.5,-13.5 150.5,-13.5 156.5,-19.5 156.5,-25.5 156.5,-25.5 156.5,-37.5 156.5,-37.5 156.5,-43.5 150.5,-49.5 144.5,-49.5"/>
<text text-anchor="middle" x="82" y="-34.9" font-family="Inter" font-size="12.00">S3 Output Bucket</text>
<text text-anchor="middle" x="82" y="-21.9" font-family="Inter" font-size="12.00">&lt;ASU_ID&gt;&#45;out&#45;bucket</text>
</g>
<!-- app&#45;&gt;s3out -->
<g id="edge6" class="edge">
<title>app&#45;&gt;s3out</title>
<path fill="none" stroke="#374151" stroke-width="1.4" d="M178.97,-130.25C151.82,-126.13 121.72,-116.88 101,-97 90.7,-87.12 85.9,-71.95 83.7,-58.81"/>
<polygon fill="#374151" stroke="#374151" stroke-width="1.4" points="86.8,-58.22 82.52,-49.7 80.56,-59.03 86.8,-58.22"/>
<text text-anchor="middle" x="142.5" y="-89" font-family="Inter" font-size="10.00">PutObject(result)</text>
</g>
</g>
</svg>
